import{j as f}from"./vendor-query-BBSsXiBS.js";import{h as m,s as o}from"./index-De75nt2H.js";import{a as r}from"./vendor-react-Cua_SOQ2.js";function S({className:a,...s}){return f.jsx("div",{className:m("animate-pulse rounded-md bg-muted",a),...s})}const b=()=>{const[a,s]=r.useState(null),[u,n]=r.useState(!0),[i,c]=r.useState(null);return r.useEffect(()=>{(async()=>{try{n(!0);const{data:{user:t},error:e}=await o.auth.getUser();if(e){if(e.message.includes("session")||e.message.includes("refresh")){s(null);return}throw e}s(t)}catch(t){console.error("Error getting user:",t),c(t)}finally{n(!1)}})();const{data:l}=o.auth.onAuthStateChange((t,e)=>{s(e?.user||null),u&&n(!1)});return()=>{l.subscription.unsubscribe()}},[]),{user:a,isLoading:u,error:i}};export{S,b as u};
